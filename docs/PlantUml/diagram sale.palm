@startuml
start
:Начало продажи;

while (Все товары?)
  :Сканирование товаров;
  :Добавление в чек;
endwhile

:Применение акций/скидок;
:Расчёт итоговой суммы;
:Оплата покупателем;
:Фискализация чека;

repeat
  :Передача в ОФД;
  if (Успешно?) then (да)
    :Печать чека;
    :Запись в базу данных;
    :Конец операции;
    stop
  else (нет)
    :Повторная отправка;
  endif
@enduml